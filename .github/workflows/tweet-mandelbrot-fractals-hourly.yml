name: tweet_mandelbrot (Hourly fractals)

on:
  schedule:
    - cron: '0 */1 * * *'

  workflow_dispatch:

  # Testing purposes
  push:
    branches:
      - main

jobs:
  run:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      # - name: Checkout
      #   uses: actions/checkout@v3

      # - name: Set up Python
      #   uses: actions/setup-python@v4
      #   with:
      #     python-version: 3.9

      # - name: Install py dependencies
      #   run: pip install numba==0.55.2 numpy==1.22.4 mykit==6.0.0 tweepy

      # - name: Install ffmpeg
      #   run: sudo apt-get update && sudo apt-get install -y ffmpeg

      # - name: Generate image
      #   run: python tweet_mandelbrot/generate

      # - name: Tweet!
      #   env:
      #     TWITTER_API_KEY: ${{ secrets.TWITTER_API_KEY_2 }}
      #     TWITTER_API_SECRET_KEY: ${{ secrets.TWITTER_API_SECRET_KEY_2 }}
      #     TWITTER_ACCESS_TOKEN: ${{ secrets.TWITTER_ACCESS_TOKEN_2 }}
      #     TWITTER_ACCESS_TOKEN_SECRET: ${{ secrets.TWITTER_ACCESS_TOKEN_SECRET_2 }}
      #   run: python tweet_mandelbrot/tweet.py

      - name: Archiving
        run: |
          # chmod +x tweet_mandelbrot/do_archive.sh
          echo "$(pwd)"
          ls
          # tweet_mandelbrot/do_archive.sh

          # echo "::group::Debug"
          # git log -3
          # echo "::endgroup::"

          # echo "::group::Commit"
          # git config user.name "tweet-mandelbrot"
          # git config user.email "${{ vars.GIT_EMAIL }}"
          # git add .
          # git commit -m "Archived â€” $(date +'%Y %b %e, %l:%M %p')"
          # git push
          # echo "::endgroup::"